<script type="text/ng-template" id="usersModalTemplate">
	<div class="modal-header">
		<h3 class="modal-title">User details</h3>
	</div>
	<div class="modal-body">
		<form class="form">
			<div class="form-group">
				<label for="username">Username</label>
				<input type="text" class="form-control" id="username" ng-model="user.Username" required autofocus>
			</div>
			<div class="alert alert-danger form-group" ng-if="usernameEmpty">
				<strong>Error!</strong> Username required.
			</div>
			<div class="form-group">
				<label for="email">Email</label>
				<input type="text" class="form-control" id="email" ng-model="user.Email">
			</div>
			<div class="form-group">
				<label for="newpasswd">New password</label>
				<input type="password" class="form-control" id="newpasswd" ng-model="user.NewPassword" placeholder="New password">
			</div>
			<div class="alert alert-danger form-group" ng-if="passwordEmpty">
				<strong>Error!</strong> Password required.
			</div>
			<div class="form-group">
				<label for="newpasswdconf">New password confirmation</label>
				<input type="password" class="form-control" id="newpasswdconf" ng-model="user.NewPasswordConf" placeholder="New password confirmation">
			</div>
			<div class="alert alert-danger form-group" ng-if="passwordMismatch">
				<strong>Error!</strong> Passwords does not match.
			</div>
			<div class="form-group">
				<label for="role">Role</label>
				<select class="form-control" id="role" ng-model="user.Role" ng-init="user.Role" ng-options="r.value as r.name for r in roles"></select>
			</div>
			<div class="alert alert-danger form-group" ng-if="roleEmpty">
				<strong>Error!</strong> Role required.
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-success" type="submit" ng-click="submitChanges()">Save changes</button>
		<button class="btn btn-primary" type="button" ng-click="closeit()">Cancel</button>
	</div>
</script>
<script type="text/ng-template" id="confirmationModalTemplate">
	<div class="modal-header">
		<h3 class="modal-title">{{title}}</h3>
	</div>
	<div class="modal-body">
		<p>{{message}}</p>
	</div>
	<div class="modal-footer">
		<button class="btn btn-danger" type="button" ng-click="ok()">Yes, remove it</button>
		<button class="btn btn-primary" type="button" ng-click="cancel()">Cancel</button>
	</div>
</script>
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	<h2>Users</h2>
	<button class="btn btn-primary pull-right" type="button" ng-click="addUser()"><span class="glyphicon glyphicon-plus"></span> Add user</button>
	<table class="table table-striped">
		<thead>
			<tr>
				<th class="col-md-1">#</th>
				<th class="col-md-2">Username</th>
				<th class="col-md-3">Email</th>
				<th class="col-md-1">Role</th>
				<th class="col-md-1"></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="(i,s) in usersTable">
				<th scope="row">{{i}}</th>
				<td>{{s.Username}}</td>
				<td>{{s.Email}}</td>
				<td>{{s.Role}}</td>
				<td>
					<button class="btn btn-default" type="button" ng-click="editUser(s)"><span class="glyphicon glyphicon-pencil"></span> Edit</button>
					<button class="btn btn-danger" type="button" ng-click="removeUser(s)"><span class="glyphicon glyphicon-remove"></span> Remove</button>
				</td>
			</tr>
		</tbody>
	</table>
</div>
